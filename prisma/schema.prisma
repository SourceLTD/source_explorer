generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("POSTGRES_PRISMA_URL")
  directUrl = env("POSTGRES_URL_NON_POOLING")
}

model frame_roles {
  created_at         DateTime             @default(now())
  updated_at         DateTime             @default(now())
  id                 BigInt               @id @default(autoincrement())
  frame_id           BigInt
  role_type_id       BigInt
  description        String?
  notes              String?
  main               Boolean?
  examples           String[]             @default([])
  label              String?
  version            Int                  @default(1)
  frames             frames               @relation(fields: [frame_id], references: [id], onDelete: Cascade)
  role_types         role_types           @relation(fields: [role_type_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  role_group_members role_group_members[]

  @@unique([frame_id, role_type_id], map: "uq_frame_role")
  @@unique([id, frame_id], map: "uq_frame_roles_id_frame")
}

model frames {
  label                                             String
  definition                                        String
  prototypical_synset                               String
  short_definition                                  String
  created_at                                        DateTime               @default(now())
  updated_at                                        DateTime               @default(now())
  id                                                BigInt                 @id @default(autoincrement())
  flagged                                           Boolean?               @default(false)
  flagged_reason                                    String?
  forbidden                                         Boolean?               @default(false)
  forbidden_reason                                  String?
  version                                           Int                    @default(1)
  embedding                                         Unsupported("vector")?
  deleted                                           Boolean                @default(false)
  deleted_at                                        DateTime?              @db.Timestamp(6)
  deleted_reason                                    String?
  adjectives                                        adjectives[]
  adverbs                                           adverbs[]
  frame_relations_frame_relations_source_idToframes frame_relations[]      @relation("frame_relations_source_idToframes")
  frame_relations_frame_relations_target_idToframes frame_relations[]      @relation("frame_relations_target_idToframes")
  frame_roles                                       frame_roles[]
  llm_job_items                                     llm_job_items[]
  nouns                                             nouns[]
  verbs                                             verbs[]

  @@index([label], map: "idx_frames_frame_name")
  @@index([flagged], map: "idx_frames_flagged")
  @@index([forbidden], map: "idx_frames_forbidden")
  @@index([embedding], map: "idx_frames_embedding")
  @@index([deleted], map: "idx_frames_deleted")
}

model instantiation_types {
  label       String  @unique
  wikidata_id String? @unique
  id          BigInt  @id @default(autoincrement())
  code        String  @unique(map: "instantiation_types_code_unique") @db.VarChar
}

model role_types {
  label               String        @unique
  generic_description String
  explanation         String?
  id                  BigInt        @id @default(autoincrement())
  code                String        @unique(map: "role_types_code_unique") @db.VarChar
  frame_roles         frame_roles[]
  roles               roles[]
}

model roles {
  main                                                                                   Boolean                          @default(false)
  description                                                                            String?
  example_sentence                                                                       String?
  created_at                                                                             DateTime                         @default(now()) @db.Timestamp(6)
  updated_at                                                                             DateTime                         @default(now()) @db.Timestamp(6)
  id                                                                                     BigInt                           @id @default(autoincrement())
  verb_id                                                                                BigInt
  role_type_id                                                                           BigInt
  instantiation_type_ids                                                                 BigInt[]                         @default([])
  version                                                                                Int                              @default(1)
  recipe_preconditions                                                                   recipe_preconditions[]
  recipe_predicate_role_bindings_recipe_predicate_role_bindings_predicate_role_idToroles recipe_predicate_role_bindings[] @relation("recipe_predicate_role_bindings_predicate_role_idToroles")
  recipe_predicate_role_bindings_recipe_predicate_role_bindings_verb_role_idToroles      recipe_predicate_role_bindings[] @relation("recipe_predicate_role_bindings_verb_role_idToroles")
  role_types                                                                             role_types                       @relation(fields: [role_type_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_roles_role_type")
  verbs                                                                                  verbs                            @relation(fields: [verb_id], references: [id], onDelete: Cascade, map: "fk_roles_verb")

  @@index([main], map: "idx_roles_main")
}

model predicate_variable_types {
  label                          String                           @unique
  description                    String?
  unit                           String?
  created_at                     DateTime                         @default(now()) @db.Timestamp(6)
  updated_at                     DateTime                         @default(now()) @db.Timestamp(6)
  id                             BigInt                           @id @default(autoincrement())
  recipe_predicate_role_bindings recipe_predicate_role_bindings[]
  recipe_variables               recipe_variables[]
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model recipe_predicate_relations {
  relation_type                                                                              RelationType
  properties                                                                                 Json?
  created_at                                                                                 DateTime          @default(now()) @db.Timestamp(6)
  updated_at                                                                                 DateTime          @default(now()) @db.Timestamp(6)
  id                                                                                         BigInt            @id @default(autoincrement())
  recipe_id                                                                                  BigInt
  source_recipe_predicate_id                                                                 BigInt
  target_recipe_predicate_id                                                                 BigInt
  recipes                                                                                    recipes           @relation(fields: [recipe_id], references: [id], onDelete: Cascade)
  recipe_predicates_recipe_predicate_relations_source_recipe_predicate_idTorecipe_predicates recipe_predicates @relation("recipe_predicate_relations_source_recipe_predicate_idTorecipe_predicates", fields: [source_recipe_predicate_id], references: [id], onDelete: Cascade)
  recipe_predicates_recipe_predicate_relations_target_recipe_predicate_idTorecipe_predicates recipe_predicates @relation("recipe_predicate_relations_target_recipe_predicate_idTorecipe_predicates", fields: [target_recipe_predicate_id], references: [id], onDelete: Cascade)

  @@unique([recipe_id, source_recipe_predicate_id, relation_type, target_recipe_predicate_id], map: "uq_recipe_pred_rel_recipe_source_type_target")
  @@index([recipe_id, source_recipe_predicate_id], map: "idx_recipe_pred_rel_recipe_source")
  @@index([recipe_id, target_recipe_predicate_id], map: "idx_recipe_pred_rel_recipe_target")
  @@index([relation_type], map: "idx_recipe_pred_rel_type")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model recipe_predicate_role_bindings {
  bind_kind                                                     String
  constant                                                      Json?
  created_at                                                    DateTime                  @default(now()) @db.Timestamp(6)
  updated_at                                                    DateTime                  @default(now()) @db.Timestamp(6)
  id                                                            BigInt                    @id @default(autoincrement())
  recipe_predicate_id                                           BigInt
  predicate_role_id                                             BigInt
  verb_role_id                                                  BigInt?
  predicate_variable_type_id                                    BigInt?
  discovered                                                    Boolean?                  @default(false)
  variable_id                                                   BigInt?
  recipe_variables                                              recipe_variables?         @relation(fields: [variable_id], references: [id], map: "fk_recipe_predicate_role_bindings_variable")
  roles_recipe_predicate_role_bindings_predicate_role_idToroles roles                     @relation("recipe_predicate_role_bindings_predicate_role_idToroles", fields: [predicate_role_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  predicate_variable_types                                      predicate_variable_types? @relation(fields: [predicate_variable_type_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  recipe_predicates                                             recipe_predicates         @relation(fields: [recipe_predicate_id], references: [id], onDelete: Cascade)
  roles_recipe_predicate_role_bindings_verb_role_idToroles      roles?                    @relation("recipe_predicate_role_bindings_verb_role_idToroles", fields: [verb_role_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@unique([recipe_predicate_id, predicate_role_id], map: "uq_recipe_predicate_role_binding")
  @@index([variable_id], map: "idx_recipe_predicate_role_bindings_variable")
}

model recipe_predicates {
  alias                                                                                               String?
  position                                                                                            Int?
  created_at                                                                                          DateTime                         @default(now()) @db.Timestamp(6)
  updated_at                                                                                          DateTime                         @default(now()) @db.Timestamp(6)
  id                                                                                                  BigInt                           @id @default(autoincrement())
  recipe_id                                                                                           BigInt
  predicate_verb_id                                                                                   BigInt
  example                                                                                             String?
  commitment                                                                                          predicate_commitment             @default(asserted)
  logic_targets                                                                                       logic_targets[]
  recipe_preconditions                                                                                recipe_preconditions[]
  recipe_predicate_relations_recipe_predicate_relations_source_recipe_predicate_idTorecipe_predicates recipe_predicate_relations[]     @relation("recipe_predicate_relations_source_recipe_predicate_idTorecipe_predicates")
  recipe_predicate_relations_recipe_predicate_relations_target_recipe_predicate_idTorecipe_predicates recipe_predicate_relations[]     @relation("recipe_predicate_relations_target_recipe_predicate_idTorecipe_predicates")
  recipe_predicate_role_bindings                                                                      recipe_predicate_role_bindings[]
  verbs                                                                                               verbs                            @relation(fields: [predicate_verb_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  recipes                                                                                             recipes                          @relation(fields: [recipe_id], references: [id], onDelete: Cascade)

  @@index([commitment], map: "idx_recipe_predicates_commitment")
}

model recipes {
  label                                               String?
  description                                         String?
  is_default                                          Boolean                      @default(false)
  created_at                                          DateTime                     @default(now()) @db.Timestamp(6)
  updated_at                                          DateTime                     @default(now()) @db.Timestamp(6)
  id                                                  BigInt                       @id @default(autoincrement())
  verb_id                                             BigInt
  example                                             String?
  logic_root_node_id                                  BigInt?
  version                                             Int                          @default(1)
  logic_nodes_logic_nodes_recipe_idTorecipes          logic_nodes[]                @relation("logic_nodes_recipe_idTorecipes")
  recipe_preconditions                                recipe_preconditions[]
  recipe_predicate_relations                          recipe_predicate_relations[]
  recipe_predicates                                   recipe_predicates[]
  recipe_variables                                    recipe_variables[]
  logic_nodes_recipes_logic_root_node_idTologic_nodes logic_nodes?                 @relation("recipes_logic_root_node_idTologic_nodes", fields: [logic_root_node_id], references: [id], onUpdate: NoAction)
  verbs                                               verbs                        @relation(fields: [verb_id], references: [id], onDelete: Cascade)
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model recipe_preconditions {
  id                         BigInt             @id @default(autoincrement())
  recipe_id                  BigInt
  condition_type             String             @db.VarChar(50)
  target_role_id             BigInt?
  target_recipe_predicate_id BigInt?
  condition_params           Json?
  description                String?
  error_message              String?
  created_at                 DateTime           @default(now()) @db.Timestamp(6)
  updated_at                 DateTime           @default(now()) @db.Timestamp(6)
  recipe_predicates          recipe_predicates? @relation(fields: [target_recipe_predicate_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_recipe_preconditions_predicate")
  recipes                    recipes            @relation(fields: [recipe_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_recipe_preconditions_recipe")
  roles                      roles?             @relation(fields: [target_role_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_recipe_preconditions_role")

  @@index([target_recipe_predicate_id], map: "idx_recipe_preconditions_predicate")
  @@index([recipe_id], map: "idx_recipe_preconditions_recipe")
  @@index([target_role_id], map: "idx_recipe_preconditions_role")
  @@index([condition_type], map: "idx_recipe_preconditions_type")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model role_group_members {
  id            BigInt      @id @default(autoincrement())
  role_group_id BigInt
  role_id       BigInt
  created_at    DateTime    @default(now()) @db.Timestamp(6)
  roles         frame_roles @relation(fields: [role_id], references: [id], onDelete: Cascade, map: "fk_role_group_members_role")
  role_groups   role_groups @relation(fields: [role_group_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_role_group_members_group")

  @@unique([role_group_id, role_id], map: "uq_role_group_member")
  @@index([role_group_id], map: "idx_role_group_members_group")
  @@index([role_id], map: "idx_role_group_members_role")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model role_groups {
  id                   BigInt               @id @default(autoincrement())
  description          String?
  require_at_least_one Boolean              @default(true)
  created_at           DateTime             @default(now()) @db.Timestamp(6)
  updated_at           DateTime             @default(now()) @db.Timestamp(6)
  verb_id              BigInt?
  role_group_members   role_group_members[]
  verbs                verbs?               @relation(fields: [verb_id], references: [id], onDelete: Restrict, onUpdate: Restrict)

  @@index([verb_id], map: "idx_role_groups_lexical_entry_id")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model adjective_relations {
  id                                                   BigInt                  @id @default(autoincrement())
  source_id                                            BigInt
  target_id                                            BigInt
  type                                                 adjective_relation_type
  weight                                               Float?
  properties                                           Json?
  created_at                                           DateTime                @default(now()) @db.Timestamp(6)
  updated_at                                           DateTime                @default(now()) @db.Timestamp(6)
  version                                              Int                     @default(1)
  adjectives_adjective_relations_source_idToadjectives adjectives              @relation("adjective_relations_source_idToadjectives", fields: [source_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_adjective_relations_source")
  adjectives_adjective_relations_target_idToadjectives adjectives              @relation("adjective_relations_target_idToadjectives", fields: [target_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_adjective_relations_target")

  @@unique([source_id, type, target_id], map: "uq_adjective_relation")
  @@index([properties], map: "idx_adjective_relations_properties", type: Gin)
  @@index([source_id], map: "idx_adjective_relations_source")
  @@index([source_id, type], map: "idx_adjective_relations_source_type")
  @@index([target_id], map: "idx_adjective_relations_target")
  @@index([target_id, type], map: "idx_adjective_relations_target_type")
  @@index([type], map: "idx_adjective_relations_type")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model adjectives {
  id                                                            BigInt                   @id @default(autoincrement())
  code                                                          String                   @unique @db.VarChar
  legacy_id                                                     String
  lemmas                                                        String[]                 @default([])
  src_lemmas                                                    String[]                 @default([])
  gloss                                                         String
  lexfile                                                       String
  examples                                                      String[]                 @default([])
  is_mwe                                                        Boolean                  @default(false)
  is_satellite                                                  Boolean                  @default(false)
  gradable                                                      Boolean?
  predicative                                                   Boolean?                 @default(true)
  attributive                                                   Boolean?                 @default(true)
  subjective                                                    Boolean?                 @default(false)
  relational                                                    Boolean?                 @default(false)
  gloss_tsv                                                     Unsupported("tsvector")?
  examples_tsv                                                  Unsupported("tsvector")?
  flagged                                                       Boolean?                 @default(false)
  flagged_reason                                                String?
  forbidden                                                     Boolean?                 @default(false)
  forbidden_reason                                              String?
  legal_gloss                                                   String?
  legal_constraints                                             String[]
  created_at                                                    DateTime                 @default(now()) @db.Timestamp(6)
  updated_at                                                    DateTime                 @default(now()) @db.Timestamp(6)
  version                                                       Int                      @default(1)
  embedding                                                     Unsupported("vector")?
  deleted                                                       Boolean                  @default(false)
  deleted_at                                                    DateTime?                @db.Timestamp(6)
  deleted_reason                                                String?
  frame_id                                                      BigInt?
  adjective_relations_adjective_relations_source_idToadjectives adjective_relations[]    @relation("adjective_relations_source_idToadjectives")
  adjective_relations_adjective_relations_target_idToadjectives adjective_relations[]    @relation("adjective_relations_target_idToadjectives")
  frames                                                        frames?                  @relation(fields: [frame_id], references: [id], onUpdate: NoAction, map: "adjectives_frame_id_fkey")
  llm_job_items                                                 llm_job_items[]

  @@index([attributive], map: "idx_adjectives_attributive")
  @@index([examples_tsv], map: "idx_adjectives_examples_tsv", type: Gin)
  @@index([flagged], map: "idx_adjectives_flagged")
  @@index([forbidden], map: "idx_adjectives_forbidden")
  @@index([gloss_tsv], map: "idx_adjectives_gloss_tsv", type: Gin)
  @@index([gradable], map: "idx_adjectives_gradable")
  @@index([is_mwe], map: "idx_adjectives_is_mwe")
  @@index([is_satellite], map: "idx_adjectives_is_satellite")
  @@index([lemmas], map: "idx_adjectives_lemmas_gin", type: Gin)
  @@index([lexfile], map: "idx_adjectives_lexfile")
  @@index([predicative], map: "idx_adjectives_predicative")
  @@index([relational], map: "idx_adjectives_relational")
  @@index([subjective], map: "idx_adjectives_subjective")
  @@index([embedding], map: "idx_adjectives_embedding")
  @@index([deleted], map: "idx_adjectives_deleted")
  @@index([frame_id], map: "idx_adjectives_frame_id")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model noun_relations {
  id                                    BigInt             @id @default(autoincrement())
  source_id                             BigInt
  target_id                             BigInt
  type                                  noun_relation_type
  weight                                Float?
  properties                            Json?
  created_at                            DateTime           @default(now()) @db.Timestamp(6)
  updated_at                            DateTime           @default(now()) @db.Timestamp(6)
  version                               Int                @default(1)
  nouns_noun_relations_source_idTonouns nouns              @relation("noun_relations_source_idTonouns", fields: [source_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_noun_relations_source")
  nouns_noun_relations_target_idTonouns nouns              @relation("noun_relations_target_idTonouns", fields: [target_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_noun_relations_target")

  @@unique([source_id, type, target_id], map: "uq_noun_relation")
  @@index([properties], map: "idx_noun_relations_properties", type: Gin)
  @@index([source_id], map: "idx_noun_relations_source")
  @@index([source_id, type], map: "idx_noun_relations_source_type")
  @@index([target_id], map: "idx_noun_relations_target")
  @@index([target_id, type], map: "idx_noun_relations_target_type")
  @@index([type], map: "idx_noun_relations_type")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model nouns {
  id                                             BigInt                   @id @default(autoincrement())
  code                                           String                   @unique @db.VarChar
  legacy_id                                      String
  lemmas                                         String[]                 @default([])
  src_lemmas                                     String[]                 @default([])
  gloss                                          String
  lexfile                                        String
  examples                                       String[]                 @default([])
  is_mwe                                         Boolean                  @default(false)
  countable                                      Boolean?
  proper                                         Boolean?                 @default(false)
  collective                                     Boolean?                 @default(false)
  concrete                                       Boolean?                 @default(false)
  predicate                                      Boolean?                 @default(false)
  gloss_tsv                                      Unsupported("tsvector")?
  examples_tsv                                   Unsupported("tsvector")?
  flagged                                        Boolean?                 @default(false)
  flagged_reason                                 String?
  forbidden                                      Boolean?                 @default(false)
  forbidden_reason                               String?
  legal_gloss                                    String?
  legal_constraints                              String[]
  created_at                                     DateTime                 @default(now()) @db.Timestamp(6)
  updated_at                                     DateTime                 @default(now()) @db.Timestamp(6)
  version                                        Int                      @default(1)
  embedding                                      Unsupported("vector")?
  deleted                                        Boolean                  @default(false)
  deleted_at                                     DateTime?                @db.Timestamp(6)
  deleted_reason                                 String?
  frame_id                                       BigInt?
  llm_job_items                                  llm_job_items[]
  noun_relations_noun_relations_source_idTonouns noun_relations[]         @relation("noun_relations_source_idTonouns")
  noun_relations_noun_relations_target_idTonouns noun_relations[]         @relation("noun_relations_target_idTonouns")
  frames                                         frames?                  @relation(fields: [frame_id], references: [id], onUpdate: NoAction, map: "nouns_frame_id_fkey")
  recipe_variables                               recipe_variables[]

  @@index([collective], map: "idx_nouns_collective")
  @@index([concrete], map: "idx_nouns_concrete")
  @@index([countable], map: "idx_nouns_countable")
  @@index([examples_tsv], map: "idx_nouns_examples_tsv", type: Gin)
  @@index([flagged], map: "idx_nouns_flagged")
  @@index([forbidden], map: "idx_nouns_forbidden")
  @@index([gloss_tsv], map: "idx_nouns_gloss_tsv", type: Gin)
  @@index([is_mwe], map: "idx_nouns_is_mwe")
  @@index([lemmas], map: "idx_nouns_lemmas_gin", type: Gin)
  @@index([lexfile], map: "idx_nouns_lexfile")
  @@index([proper], map: "idx_nouns_proper")
  @@index([embedding], map: "idx_nouns_embedding")
  @@index([deleted], map: "idx_nouns_deleted")
  @@index([frame_id], map: "idx_nouns_frame_id")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model verbs {
  legacy_id                                      String
  gloss                                          String
  lexfile                                        String
  lemmas                                         String[]               @default([])
  src_lemmas                                     String[]               @default([])
  examples                                       String[]               @default([])
  created_at                                     DateTime               @default(now())
  updated_at                                     DateTime               @default(now())
  flagged                                        Boolean?               @default(false)
  flagged_reason                                 String?
  forbidden                                      Boolean?               @default(false)
  forbidden_reason                               String?
  vendler_class                                  vendler_class_type?
  legal_gloss                                    String?
  concrete                                       Boolean?               @default(false)
  id                                             BigInt                 @id(map: "lexical_entries_pkey") @default(autoincrement())
  code                                           String                 @unique(map: "lexical_entries_code_unique") @db.VarChar
  frame_id                                       BigInt?
  created_from                                   String[]               @default([])
  deleted                                        Boolean                @default(false)
  deleted_reason                                 String?
  deleted_at                                     DateTime?              @db.Timestamp(6)
  version                                        Int                    @default(1)
  embedding                                      Unsupported("vector")?
  llm_job_items                                  llm_job_items[]
  recipe_predicates                              recipe_predicates[]
  recipes                                        recipes[]
  role_groups                                    role_groups[]
  roles                                          roles[]
  verb_relations_verb_relations_source_idToverbs verb_relations[]       @relation("verb_relations_source_idToverbs")
  verb_relations_verb_relations_target_idToverbs verb_relations[]       @relation("verb_relations_target_idToverbs")
  frames                                         frames?                @relation(fields: [frame_id], references: [id], onUpdate: NoAction, map: "lexical_entries_frame_id_fkey")

  @@unique([id, frame_id], map: "uq_lex_entry_id_frame")
  @@index([lemmas], map: "idx_lex_lemmas_gin", type: Gin)
  @@index([vendler_class], map: "idx_lex_vendler_class")
  @@index([created_from], map: "idx_verbs_created_from_gin", type: Gin)
  @@index([embedding], map: "idx_verbs_embedding")
}

model verb_relations {
  type                                  RelationType
  id                                    BigInt       @id(map: "entry_relations_pkey") @default(autoincrement())
  source_id                             BigInt
  target_id                             BigInt
  version                               Int          @default(1)
  verbs_verb_relations_source_idToverbs verbs        @relation("verb_relations_source_idToverbs", fields: [source_id], references: [id], onDelete: Cascade, map: "entry_relations_source_id_fkey")
  verbs_verb_relations_target_idToverbs verbs        @relation("verb_relations_target_idToverbs", fields: [target_id], references: [id], onDelete: Cascade, map: "entry_relations_target_id_fkey")

  @@unique([source_id, type, target_id], map: "uq_entry_relation")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model logic_edges {
  id                                                  BigInt      @id @default(autoincrement())
  parent_node_id                                      BigInt
  child_node_id                                       BigInt
  position                                            Int?
  created_at                                          DateTime?   @default(now()) @db.Timestamp(6)
  logic_nodes_logic_edges_child_node_idTologic_nodes  logic_nodes @relation("logic_edges_child_node_idTologic_nodes", fields: [child_node_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  logic_nodes_logic_edges_parent_node_idTologic_nodes logic_nodes @relation("logic_edges_parent_node_idTologic_nodes", fields: [parent_node_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([parent_node_id, child_node_id])
  @@index([child_node_id], map: "idx_logic_edges_child")
  @@index([parent_node_id, position], map: "idx_logic_edges_parent_position")
}

model logic_nodes {
  id                                                  BigInt          @id @default(autoincrement())
  recipe_id                                           BigInt
  kind                                                logic_node_kind
  description                                         String?
  created_at                                          DateTime?       @default(now()) @db.Timestamp(6)
  updated_at                                          DateTime?       @default(now()) @db.Timestamp(6)
  natural_key                                         String?         @unique
  logic_edges_logic_edges_child_node_idTologic_nodes  logic_edges[]   @relation("logic_edges_child_node_idTologic_nodes")
  logic_edges_logic_edges_parent_node_idTologic_nodes logic_edges[]   @relation("logic_edges_parent_node_idTologic_nodes")
  recipes_logic_nodes_recipe_idTorecipes              recipes         @relation("logic_nodes_recipe_idTorecipes", fields: [recipe_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  logic_targets                                       logic_targets?
  recipes_recipes_logic_root_node_idTologic_nodes     recipes[]       @relation("recipes_logic_root_node_idTologic_nodes")

  @@index([recipe_id, kind], map: "idx_logic_nodes_recipe_kind")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model logic_targets {
  id                  BigInt             @id @default(autoincrement())
  node_id             BigInt             @unique
  recipe_predicate_id BigInt?
  predicate_group_id  BigInt?
  created_at          DateTime?          @default(now()) @db.Timestamp(6)
  logic_nodes         logic_nodes        @relation(fields: [node_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  recipe_predicates   recipe_predicates? @relation(fields: [recipe_predicate_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([predicate_group_id], map: "idx_logic_targets_group")
  @@index([recipe_predicate_id], map: "idx_logic_targets_predicate")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model recipe_variables {
  id                             BigInt                           @id @default(autoincrement())
  recipe_id                      BigInt
  key                            String
  predicate_variable_type_id     BigInt?
  noun_id                        BigInt?
  default_value                  Json?
  created_at                     DateTime                         @default(now()) @db.Timestamp(6)
  updated_at                     DateTime                         @default(now()) @db.Timestamp(6)
  recipe_predicate_role_bindings recipe_predicate_role_bindings[]
  nouns                          nouns?                           @relation(fields: [noun_id], references: [id], onUpdate: NoAction, map: "fk_recipe_variables_noun")
  recipes                        recipes                          @relation(fields: [recipe_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_recipe_variables_recipe")
  predicate_variable_types       predicate_variable_types?        @relation(fields: [predicate_variable_type_id], references: [id], onUpdate: NoAction, map: "fk_recipe_variables_var_type")

  @@unique([recipe_id, key], map: "uq_recipe_variables_recipe_key")
  @@index([key], map: "idx_recipe_variables_key")
  @@index([recipe_id], map: "idx_recipe_variables_recipe")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model llm_job_items {
  id               BigInt              @id @default(autoincrement())
  job_id           BigInt
  verb_id          BigInt?
  noun_id          BigInt?
  adjective_id     BigInt?
  status           llm_job_item_status @default(queued)
  attempt_count    Int                 @default(0)
  provider_task_id String?
  llm_request_id   String?
  request_payload  Json?
  response_payload Json?
  flags            Json?
  flagged          Boolean             @default(false)
  last_error       String?
  input_tokens     Int                 @default(0)
  output_tokens    Int                 @default(0)
  created_at       DateTime            @default(now()) @db.Timestamptz(6)
  started_at       DateTime?           @db.Timestamptz(6)
  completed_at     DateTime?           @db.Timestamptz(6)
  updated_at       DateTime            @default(now()) @db.Timestamptz(6)
  adverb_id        BigInt?
  frame_id         BigInt?
  has_edits        Boolean?            @default(false)
  adverbs          adverbs?            @relation(fields: [adverb_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_llm_job_items_adverb")
  adjectives       adjectives?         @relation(fields: [adjective_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  frames           frames?             @relation(fields: [frame_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  llm_jobs         llm_jobs            @relation(fields: [job_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  nouns            nouns?              @relation(fields: [noun_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  verbs            verbs?              @relation(fields: [verb_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([adverb_id], map: "idx_llm_job_items_adverb")
  @@index([frame_id], map: "idx_llm_job_items_frame")
}

model llm_jobs {
  id              BigInt          @id @default(autoincrement())
  label           String?
  submitted_by    String?
  scope_kind      String?
  scope           Json?
  config          Json?
  provider        String?
  provider_run_id String?
  llm_vendor      String?
  llm_request_id  String?
  status          llm_job_status  @default(queued)
  total_items     Int             @default(0)
  processed_items Int             @default(0)
  succeeded_items Int             @default(0)
  failed_items    Int             @default(0)
  flagged_items   Int             @default(0)
  input_tokens    Int             @default(0)
  output_tokens   Int             @default(0)
  cost_microunits BigInt?
  error           String?
  created_at      DateTime        @default(now()) @db.Timestamptz(6)
  started_at      DateTime?       @db.Timestamptz(6)
  completed_at    DateTime?       @db.Timestamptz(6)
  updated_at      DateTime        @default(now()) @db.Timestamptz(6)
  deleted         Boolean         @default(false)
  submitted_items Int             @default(0)
  unseen_change   Boolean         @default(false)
  job_type        llm_job_type?   @default(moderation)
  changegroups    changegroups[]
  llm_job_items   llm_job_items[]
}

model frame_relations {
  id                                       BigInt              @id @default(autoincrement())
  source_id                                BigInt
  target_id                                BigInt
  type                                     frame_relation_type
  created_at                               DateTime?           @default(now()) @db.Timestamp(6)
  updated_at                               DateTime?           @default(now()) @db.Timestamp(6)
  version                                  Int                 @default(1)
  frames_frame_relations_source_idToframes frames              @relation("frame_relations_source_idToframes", fields: [source_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_frame_relations_source")
  frames_frame_relations_target_idToframes frames              @relation("frame_relations_target_idToframes", fields: [target_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_frame_relations_target")

  @@unique([source_id, type, target_id], map: "uq_frame_relation")
  @@index([source_id], map: "idx_frame_relations_source")
  @@index([source_id, type], map: "idx_frame_relations_source_type")
  @@index([target_id], map: "idx_frame_relations_target")
  @@index([target_id, type], map: "idx_frame_relations_target_type")
  @@index([type], map: "idx_frame_relations_type")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model adverb_relations {
  id                                          BigInt               @id @default(autoincrement())
  source_id                                   BigInt
  target_id                                   BigInt
  type                                        adverb_relation_type
  weight                                      Float?
  properties                                  Json?
  created_at                                  DateTime             @default(now()) @db.Timestamp(6)
  updated_at                                  DateTime             @default(now()) @db.Timestamp(6)
  version                                     Int                  @default(1)
  adverbs_adverb_relations_source_idToadverbs adverbs              @relation("adverb_relations_source_idToadverbs", fields: [source_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_adverb_relations_source")
  adverbs_adverb_relations_target_idToadverbs adverbs              @relation("adverb_relations_target_idToadverbs", fields: [target_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_adverb_relations_target")

  @@unique([source_id, type, target_id], map: "uq_adverb_relation")
  @@index([properties], map: "idx_adverb_relations_properties", type: Gin)
  @@index([source_id], map: "idx_adverb_relations_source")
  @@index([source_id, type], map: "idx_adverb_relations_source_type")
  @@index([target_id], map: "idx_adverb_relations_target")
  @@index([target_id, type], map: "idx_adverb_relations_target_type")
  @@index([type], map: "idx_adverb_relations_type")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model adverbs {
  id                                                   BigInt                   @id @default(autoincrement())
  code                                                 String                   @unique @db.VarChar
  legacy_id                                            String                   @db.VarChar
  lemmas                                               String[]                 @default([])
  src_lemmas                                           String[]                 @default([])
  gloss                                                String
  lexfile                                              String                   @db.VarChar
  examples                                             String[]                 @default([])
  is_mwe                                               Boolean                  @default(false)
  gradable                                             Boolean?
  gloss_tsv                                            Unsupported("tsvector")?
  examples_tsv                                         Unsupported("tsvector")?
  flagged                                              Boolean?                 @default(false)
  flagged_reason                                       String?
  forbidden                                            Boolean?                 @default(false)
  forbidden_reason                                     String?
  legal_gloss                                          String?
  legal_constraints                                    String[]
  created_at                                           DateTime                 @default(now()) @db.Timestamp(6)
  updated_at                                           DateTime                 @default(now()) @db.Timestamp(6)
  version                                              Int                      @default(1)
  embedding                                            Unsupported("vector")?
  deleted                                              Boolean                  @default(false)
  deleted_at                                           DateTime?                @db.Timestamp(6)
  deleted_reason                                       String?
  frame_id                                             BigInt?
  adverb_relations_adverb_relations_source_idToadverbs adverb_relations[]       @relation("adverb_relations_source_idToadverbs")
  adverb_relations_adverb_relations_target_idToadverbs adverb_relations[]       @relation("adverb_relations_target_idToadverbs")
  frames                                               frames?                  @relation(fields: [frame_id], references: [id], onUpdate: NoAction)
  llm_job_items                                        llm_job_items[]

  @@index([examples_tsv], map: "idx_adverbs_examples_tsv", type: Gin)
  @@index([flagged], map: "idx_adverbs_flagged")
  @@index([forbidden], map: "idx_adverbs_forbidden")
  @@index([gloss_tsv], map: "idx_adverbs_gloss_tsv", type: Gin)
  @@index([gradable], map: "idx_adverbs_gradable")
  @@index([is_mwe], map: "idx_adverbs_is_mwe")
  @@index([lemmas], map: "idx_adverbs_lemmas_gin", type: Gin)
  @@index([lexfile], map: "idx_adverbs_lexfile")
  @@index([embedding], map: "idx_adverbs_embedding")
  @@index([deleted], map: "idx_adverbs_deleted")
  @@index([frame_id], map: "idx_adverbs_frame_id")
}

model audit_log {
  id             BigInt           @id @default(autoincrement())
  entity_type    entity_type
  entity_id      BigInt
  field_name     String
  operation      change_operation
  old_value      Json?
  new_value      Json?
  changed_by     String
  changed_at     DateTime         @default(now()) @db.Timestamptz(6)
  changeset_id   BigInt?
  changegroup_id BigInt?
  changegroups   changegroups?    @relation(fields: [changegroup_id], references: [id], onUpdate: NoAction)
  changesets     changesets?      @relation(fields: [changeset_id], references: [id], onUpdate: NoAction)

  @@index([changed_at], map: "idx_audit_log_changed_at")
  @@index([changed_by], map: "idx_audit_log_changed_by")
  @@index([entity_type, entity_id], map: "idx_audit_log_entity")
}

model changegroups {
  id                  BigInt             @id @default(autoincrement())
  source              changegroup_source
  label               String?
  description         String?
  llm_job_id          BigInt?
  status              changeset_status   @default(pending)
  created_by          String
  created_at          DateTime           @default(now()) @db.Timestamptz(6)
  committed_by        String?
  committed_at        DateTime?          @db.Timestamptz(6)
  total_changesets    Int                @default(0)
  approved_changesets Int                @default(0)
  rejected_changesets Int                @default(0)
  audit_log           audit_log[]
  llm_jobs            llm_jobs?          @relation(fields: [llm_job_id], references: [id], onUpdate: NoAction)
  changesets          changesets[]

  @@index([created_at], map: "idx_changegroups_created_at")
  @@index([created_by], map: "idx_changegroups_created_by")
  @@index([llm_job_id], map: "idx_changegroups_llm_job")
  @@index([status], map: "idx_changegroups_status")
}

model changesets {
  id              BigInt            @id @default(autoincrement())
  changegroup_id  BigInt?
  entity_type     entity_type
  entity_id       BigInt?
  operation       change_operation
  entity_version  Int?
  before_snapshot Json?
  after_snapshot  Json?
  status          changeset_status  @default(pending)
  created_by      String
  created_at      DateTime          @default(now()) @db.Timestamptz(6)
  reviewed_by     String?
  reviewed_at     DateTime?         @db.Timestamptz(6)
  committed_at    DateTime?         @db.Timestamptz(6)
  audit_log       audit_log[]
  change_comments change_comments[]
  changegroups    changegroups?     @relation(fields: [changegroup_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  field_changes   field_changes[]

  @@index([changegroup_id], map: "idx_changesets_changegroup")
  @@index([created_at], map: "idx_changesets_created_at")
  @@index([created_by], map: "idx_changesets_created_by")
  @@index([entity_type, entity_id], map: "idx_changesets_entity")
  @@index([status], map: "idx_changesets_status")
}

model field_changes {
  id              BigInt              @id @default(autoincrement())
  changeset_id    BigInt
  field_name      String
  old_value       Json?
  new_value       Json?
  status          field_change_status @default(pending)
  approved_by     String?
  approved_at     DateTime?           @db.Timestamptz(6)
  rejected_by     String?
  rejected_at     DateTime?           @db.Timestamptz(6)
  change_comments change_comments[]
  changesets      changesets          @relation(fields: [changeset_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([changeset_id, field_name])
  @@index([changeset_id], map: "idx_field_changes_changeset")
  @@index([status], map: "idx_field_changes_status")
}

model change_comments {
  id              BigInt         @id @default(autoincrement())
  changeset_id    BigInt?
  field_change_id BigInt?
  author          String
  content         String
  created_at      DateTime       @default(now()) @db.Timestamptz(6)
  changesets      changesets?    @relation(fields: [changeset_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  field_changes   field_changes? @relation(fields: [field_change_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([changeset_id], map: "idx_change_comments_changeset")
  @@index([field_change_id], map: "idx_change_comments_field_change")
}

enum RelationType {
  also_see
  causes
  entails
  hypernym
  hyponym
  starts
  ends
  precedes
  during
  enables
  do_again
  co_temporal

  @@map("relation_type")
}

enum vendler_class_type {
  state
  activity
  accomplishment
  achievement
}

enum adjective_relation_type {
  similar
  also_see
  attribute
  antonym
  domain_topic
  domain_region
  domain_usage
  member_of_domain_topic
  member_of_domain_region
  member_of_domain_usage
  exemplifies
  derivationally_related
  pertainym
  participle_of
  related_to
  causes
}

enum noun_relation_type {
  hypernym
  hyponym
  instance_hypernym
  instance_hyponym
  meronym_part
  holonym_part
  meronym_member
  holonym_member
  meronym_substance
  holonym_substance
  similar_to
  also_see
  attribute
  derivationally_related
  pertainym
  domain_topic
  domain_region
  domain_usage
  member_of_domain_topic
  member_of_domain_region
  member_of_domain_usage
}

enum logic_node_kind {
  and
  or
  not
  leaf
  enables
  causes
  precedes
  starts
  ends
  during
  co_temporal
}

enum predicate_commitment {
  asserted
  afforded
}

enum llm_job_item_status {
  queued
  submitting
  processing
  succeeded
  failed
  skipped
}

enum llm_job_status {
  queued
  running
  completed
  failed
  cancelled
  paused
}

enum frame_relation_type {
  causes
  inherits_from
  inherited_by
  uses
  used_by
  subframe_of
  has_subframe
  precedes
  preceded_by
  perspective_on
  perspectivized_in
  see_also
  reframing_mapping
  metaphor
}

enum adverb_relation_type {
  also
  similar
  antonym
  domain_topic
  domain_region
  domain_usage
  member_of_domain_topic
  member_of_domain_region
  member_of_domain_usage
  derivationally_related
  pertainym
}

enum change_operation {
  create
  update
  delete
}

enum changegroup_source {
  llm_job
  manual
  import
  migration
}

enum changeset_status {
  pending
  committed
  discarded
}

enum entity_type {
  verb
  noun
  adjective
  adverb
  frame
  frame_role
  role
  recipe
  verb_relation
  noun_relation
  adjective_relation
  adverb_relation
  frame_relation
}

enum field_change_status {
  pending
  approved
  rejected
}

enum llm_job_type {
  moderation
  editing
}
